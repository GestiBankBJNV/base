package com.gk.gestibank.conseiller.service.impl.txt;

import java.util.ArrayList;
import java.util.List;

import org.apache.commons.lang.StringUtils;

import com.gk.gestibank.conseiller.service.IChargerConseiller;
import com.gk.gestibank.model.Conseiller;

import fr.eni.spring.expert.Expert;

public class ChargeurConseillerFichierTxt implements IChargerConseiller {

	@Override
	public List<Conseiller> chargerConseillers() {
		ArrayList<Conseiller> _listeConseillers;
		Conseiller _conseiller;
		
		// Initialisation liste
		_listeConseillers = new ArrayList<Conseiller>();
		_conseiller = null;
		// Lecture des donnees
		_conseiller = _chargerProchainConseiller()();
		while (null != _conseiller) {
			_listeConseillers.add(_conseiller);
			_conseiller = _chargerProchainConseiller()();			
		}
		
		return _listeConseillers;
	}

	/**
	 * Chargement de la prochaine entree de type Conseiller.
	 * @return
	 */
	private Conseiller _chargerProchainConseiller() {
		Conseiller _conseiller = null;
		String _strDonnees = null;
		String[] _tstrTravail;
		int _iNumero;
		
		// Chargement des donnees
		_strDonnees = chargeurDonnees.lireEntree();
		// Traitement
		if (null != _strDonnees) {
			// Des donnees lues
			// Format : nom,prenom,numero
			_tstrTravail = StringUtils.split(_strDonnees,",");
			_iNumero = (new Integer(_tstrTravail[2])).intValue();
			// Creation entite expert
			_conseiller = new Conseiller(_tstrTravail[0],
			                     _tstrTravail[1],
			                     _iNumero);
		}
		
		return _conseiller;
	} // _chargerProchainExpert
}
